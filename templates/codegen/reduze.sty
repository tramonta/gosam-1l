# ##############################################################################
#  Reduze:
#    A.v.Manteuffel
#    C.Studerus
#
#  QGRAF style-file to generate the diagrams in a YAML readable format
#
#  2015-07-11 changed ordering of fields in propagator loop
#  2016-05-03 changed "mass" to "MASS" for GoSam compatibility (Stephen Jones)
#
# ##############################################################################

<prologue>

#
# file generated by <program>
#

---
qgraf_globals:
  - "qgraf_version = <program>"
<command_loop><command_line_loop>  - "<command_data><back>"
<end><end>

#
# - external_legs / propagators: 2-element sequence
#       [[ [[in vertex, out vertex]], feynman_rule_id: [[field(s)]] ]]
#     a field has 6 entries:
#       [[particle name, field type, commutator sign, momentum, MASS,
<back> field index]]
#     where the field types are: 1=incoming, 2=outgoing, 3=internal
# - vertices: 1-element sequence
#       [[feynman_rule_id: [[fields]]
#
# - comments
#   * The momenta directions of the initial state particles are
#     incoming and the momenta of the final state particles are
#     outgoing.
#   * The momenta of the fields around a vertex are all ingoing
#     to that vertex.
#   * For a propagator, the first entry in the fields list specifies
#     the particle type and the propagator momentum along the particle
#     flow.
#   * Particle flows are directed from higher to lower field indices,
#     such that fermion chains will usually be assembled from lower
#     to higher field indices. 
#   * When glueing together a vertex and a propagator at a given field
#     index, the particle names in the respective first entries of the
#     field specifications coincide.
#

<diagram>
---
diagram:
  name: <diagram_index>
  external_legs:
  <back><back><back><in_loop>
    - [[ [[-<in_index>, <vertex_index>]], in-<field>:
<back> [[[[<field>, <field_type>, <field_sign>1, <momentum>, [MASS],
<back> <field_index>]]]] ]]<end>
  <back><back><back><out_loop>
    - [[ [[<vertex_index>, -<leg_index>]], out-<field>:
<back> [[[[<field>, <field_type>, <field_sign>1, <momentum>, [MASS],
<back> <field_index>]]]] ]]<end>
<back>
  propagators:
  <back><back><back><propagator_loop>
    - [[
<back> [[<dual-vertex_index>, <vertex_index>]], <field>_<dual-field>:
<back> [[[[<field>, <field_type>, <field_sign>1, <momentum>, [MASS],
<back> <field_index>]],
<back> [[<dual-field>, <field_type>, <field_sign>1, <dual-momentum>, [MASS],
<back> <dual-field_index>]]]]
<back> ]]<end>
<back>
  vertices:
  <back><back><back><vertex_loop>
    - [[ <ray_loop><field>_<end><back>:
<back> [[<ray_loop>[[<field>, <field_type>, <field_sign>1, <momentum>,
<back> [MASS], <field_index>]], <end><back><back>]] ]]<end>
<back>
  symmetry_factor: <minus><symmetry_factor>
  num_legs_in: <legs_in>
  num_legs_out: <legs_out>
  num_loops: <loops>
  num_propagators: <propagators>
  num_vertices: <vertices>

<epilogue>
<exit>

# ##############################################################################
